(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{"/pAu":function(t,a,s){"use strict";s.r(a);var e=s("4QaF"),i={components:{Layout:s("+SZM").a,TitleBar:e.a},props:{members:Array,users:Array,stats:Array},data:function(){return{compoName:"non"==this.stats.page?"Non-Members":"Members",loader:!1,form:{user_id:"",id:""}}},mounted:function(){this.$nextTick((function(){selectActiveMenu(),$(".zero-configuration").DataTable({aaSorting:[]})}))},methods:{formatString:function(t){return t.replace("-"," ").replace("-"," ").toUpperCase()},submit:function(){var t=this;this.loader=!0,axios.post("/follow-up",this.form).then((function(a){toastr.success(a.data.success,"Success"),$("#addFollowModal").modal("hide"),t.$inertia.visit("members"),t.loader=!1})).catch((function(a){t.loader=!1,toastr.error(a.response.data.message,"Error")}))},deleteMember:function(t){var a=this;this.$swal({title:"Delete Member?",text:"You can't revert your action",type:"success",showCancelButton:!0,confirmButtonText:"Yes, Delete it!",cancelButtonText:"No, Cancel!",showCloseButton:!0,showLoaderOnConfirm:!0}).then((function(s){s.value?axios.get("/member/delete/"+t).then((function(t){toastr.success(t.data.success,"Success"),a.$inertia.visit("members")})).catch((function(t){toastr.error(t.response.data.message,"Error")})):a.$swal("Cancelled","Your file is still intact","info")}))},moveMember:function(t){var a=this;null==t?toastr.error("Selected Member needs to be a user!!! Kindly update the member role.","Error"):this.$swal({title:"Move Member?",text:"You can't revert your action",type:"success",showCancelButton:!0,confirmButtonText:"Yes, Move it!",cancelButtonText:"No, Cancel!",showCloseButton:!0,showLoaderOnConfirm:!0}).then((function(s){s.value?axios.get("/member/move/"+t.id).then((function(t){toastr.success(t.data.success,"Success"),a.$inertia.visit("members")})).catch((function(t){toastr.error(t.response.data.message,"Error")})):a.$swal("Cancelled","Your file is still intact","info")}))},currentRec:function(t){this.addEdit="Edit",this.form.id=t.id,this.form.user_id=t.user.id}}},r=s("KHd+"),o=Object(r.a)(i,(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("layout",["non"==t.stats.page?s("div",{staticClass:"pull-right"},[t.is("admin | head-of-follow-up-ministry ")?s("inertiaLink",{staticClass:"btn btn-primary",attrs:{href:"/members"}},[s("i",{staticClass:"feather icon-home"}),t._v(" Registered Members.\n        ")]):t._e()],1):s("div",{staticClass:"pull-right"},[t.is("admin | head-of-follow-up-ministry ")?s("inertiaLink",{staticClass:"btn btn-primary",attrs:{href:"/registered-non-members"}},[s("i",{staticClass:"feather icon-home"}),t._v(" Registered Non-Members.\n        ")]):t._e()],1),t._v(" "),s("title-bar",{attrs:{name:t.compoName}}),t._v(" "),t.is("follow-up")?s("div",{staticClass:"row"},[s("div",{staticClass:"col-lg-3 col-sm-6"},[s("div",{staticClass:"card mb-1"},[s("div",{staticClass:"card-header d-flex align-items-start pb-2"},[s("div",[s("h3",{staticClass:"text-bold-600"},[t._v(t._s(t.stats.new?t.stats.new:0))]),t._v(" "),s("p",{staticClass:"mb-0"},[t._v("New Guest")])]),t._v(" "),s("div",{staticClass:"avatar bg-rgba-primary p-50"},[s("div",{staticClass:"avatar-content"},[s("i",{staticClass:"feather icon-users text-primary font-medium-5"})])])])])]),t._v(" "),s("div",{staticClass:"col-lg-3 col-sm-6"},[s("div",{staticClass:"card mb-1"},[s("div",{staticClass:"card-header d-flex align-items-start pb-2"},[s("div",[s("h3",{staticClass:"text-bold-600"},[t._v(t._s(t.stats.visits))]),t._v(" "),s("p",{staticClass:"mb-0"},[t._v("Total Visits")])]),t._v(" "),s("div",{staticClass:"avatar bg-rgba-primary p-50"},[s("div",{staticClass:"avatar-content"},[s("i",{staticClass:"feather icon-package text-primary font-medium-5"})])])])])]),t._v(" "),s("div",{staticClass:"col-lg-3 col-sm-6"},[s("div",{staticClass:"card mb-1"},[s("div",{staticClass:"card-header d-flex align-items-start pb-2"},[s("div",[s("h3",{staticClass:"text-bold-600"},[t._v(t._s(t.stats.texts))]),t._v(" "),s("p",{staticClass:"mb-0"},[t._v("Total Texts")])]),t._v(" "),s("div",{staticClass:"avatar bg-rgba-primary p-50"},[s("div",{staticClass:"avatar-content"},[s("i",{staticClass:"feather icon-bell text-primary font-medium-5"})])])])])]),t._v(" "),s("div",{staticClass:"col-lg-3 col-sm-6"},[s("div",{staticClass:"card mb-1"},[s("div",{staticClass:"card-header d-flex align-items-start pb-2"},[s("div",[s("h3",{staticClass:"text-bold-600"},[t._v(t._s(t.stats.emails))]),t._v(" "),s("p",{staticClass:"mb-0"},[t._v("Emails")])]),t._v(" "),s("div",{staticClass:"avatar bg-rgba-primary p-50"},[s("div",{staticClass:"avatar-content"},[s("i",{staticClass:"feather icon-calendar text-primary font-medium-5"})])])])])]),t._v(" "),s("div",{staticClass:"col-lg-3 col-sm-6"},[s("div",{staticClass:"card mb-1"},[s("div",{staticClass:"card-header d-flex align-items-start pb-2"},[s("div",[s("h3",{staticClass:"text-bold-600"},[t._v(t._s(t.stats.calls))]),t._v(" "),s("p",{staticClass:"mb-0"},[t._v("Calls")])]),t._v(" "),s("div",{staticClass:"avatar bg-rgba-primary p-50"},[s("div",{staticClass:"avatar-content"},[s("i",{staticClass:"feather icon-cloud text-primary font-medium-5"})])])])])])]):t._e(),t._v(" "),s("div",{staticClass:"row"},[s("div",{staticClass:"col-12 "},[s("div",{staticClass:"card"},[s("div",{staticClass:"card-content"},[s("div",{staticClass:"card-body card-dashboard mb-2"},[s("div",{staticClass:"pull-right"},[t.is("admin | super-admin")?s("inertiaLink",{staticClass:"btn btn-primary",attrs:{href:"/members/add"}},[s("i",{staticClass:"feather icon-user"}),t._v(" Add Members\n                            ")]):t._e(),t._v(" "),t.is("follow-up | head-of-ministry | ahom")?s("inertiaLink",{staticClass:"btn btn-primary",attrs:{href:"/members/guest/add"}},[s("i",{staticClass:"feather icon-user"}),t._v(" Add Guest\n                            ")]):t._e()],1),t._v(" "),s("h4",{staticClass:"card-title"},[t._v("Members")]),t._v(" "),s("div",{staticClass:"table-responsive"},[s("table",{staticClass:"table table-hover zero-configuration"},[s("thead",[s("tr"),s("tr",[s("th",[t._v("Name")]),t._v(" "),s("th",[t._v("Email")]),t._v(" "),s("th",[t._v("Phone number")]),t._v(" "),t.is("admin | head-of-ministry | ahom | super-admin")?s("th",[t._v("Extension")]):t._e(),t._v(" "),t.is("admin | head-of-ministry | ahom | super-admin")?s("th",[t._v("Role")]):t._e(),t._v(" "),t.is("admin | head-of-ministry | ahom | super-admin")?s("th",[t._v("Ministry")]):t._e(),t._v(" "),t.is("admin | head-of-ministry | ahom | super-admin")?s("th",[t._v("Unit")]):t._e(),t._v(" "),t.is("admin | head-of-ministry | ahom | super-admin")?s("th",[t._v("Progress")]):t._e(),t._v(" "),t.is("admin | head-of-ministry | ahom | super-admin")?s("th",[t._v("Action")]):t._e()])]),t._v(" "),s("tbody",t._l(t.members,(function(a,e){return s("tr",{key:e},[s("td",[t._v(" "+t._s(a.last_name)+" "+t._s(a.first_name)+" "+t._s(a.other_names))]),t._v(" "),s("td",{staticClass:"product-name"},[t._v(t._s(a.email_address))]),t._v(" "),s("td",{staticClass:"product-category"},[t._v(t._s(a.phone_number))]),t._v(" "),t.is("admin | head-of-ministry | ahom | super-admin")?s("td",{staticClass:"product-category"},[t._v(t._s(a.extension?a.extension.ext_name:""))]):t._e(),t._v(" "),t.is("admin | head-of-ministry | ahom | super-admin")?s("td",{staticClass:"product-category"},[t._v(t._s(a.role_id?t.formatString(a.role.name):""))]):t._e(),t._v(" "),t.is("admin | head-of-ministry | ahom | super-admin")?s("td",{staticClass:"product-category"},[t._v(t._s(a.ministry?a.ministry.min_name:""))]):t._e(),t._v(" "),t.is("admin | head-of-ministry | ahom | super-admin")?s("td",{staticClass:"product-category"},[t._v(t._s(a.unit?a.unit.unit_name:""))]):t._e(),t._v(" "),t.is("admin | head-of-ministry | ahom | super-admin")?s("td",[s("div",{staticClass:"progress progress-bar-success"},[s("div",{staticClass:"progress-bar",style:"width:"+a.progress/4*100+"%",attrs:{role:"progressbar","aria-valuenow":a.progress/4*100,"aria-valuemin":a.progress/4*100,"aria-valuemax":"100"}})])]):t._e(),t._v(" "),s("td",[s("div",{staticClass:"dropdown"},[s("button",{staticClass:"btn-icon btn btn-primary btn-round btn-sm",attrs:{type:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[s("i",{staticClass:"feather icon-more-vertical"})]),t._v(" "),s("div",{staticClass:"dropdown-menu dropdown-menu-right"},[t.is("admin | head-of-ministry | ahom | super-admin")?[a.assigned?s("p",{staticClass:"badge badge-success dropdown-item"},[t._v("ASSIGNED")]):s("button",{staticClass:"dropdown-item",attrs:{"data-toggle":"modal","data-target":"#addFollowModal"},on:{click:function(s){return t.currentRec(a)}}},[t._v("\n                                                                Assign\n                                                            ")])]:t._e(),t._v(" "),t.is("admin | head-of-follow-up-ministry ")?s("button",{staticClass:"dropdown-item",on:{click:function(s){return t.moveMember(null!=a.user?a.user:void 0)}}},[t._v("\n                                                            Move To FBS\n                                                        ")]):t._e(),t._v(" "),t.is("admin | head-of-ministry | ahom | super-admin | follow-up")?s("inertia-link",{staticClass:"dropdown-item",attrs:{href:"/feedback/"+a.id}},[t._v("View Feedback")]):t._e(),t._v(" "),t.is("admin | head-of-ministry | ahom | super-admin")?s("inertia-link",{staticClass:"dropdown-item",attrs:{href:"/member/update/"+a.id}},[t._v("Edit Member")]):t._e(),t._v(" "),t.is("admin | head-of-ministry | ahom | super-admin")?s("button",{staticClass:"dropdown-item",on:{click:function(s){return t.deleteMember(a.id)}}},[t._v("Delete Member")]):t._e()],2)])])])})),0)])])])])])])]),t._v(" "),s("div",{staticClass:"modal fade text-left",attrs:{id:"addFollowModal",tabindex:"-1",role:"dialog","aria-labelledby":"myModalLabel33","aria-hidden":"true"}},[s("div",{staticClass:"modal-dialog modal-dialog-centered modal-dialog-scrollable",attrs:{role:"document"}},[s("div",{staticClass:"modal-content"},[s("div",{staticClass:"modal-header"},[s("h4",{staticClass:"modal-title",attrs:{id:"myModalLabel33"}},[t._v("Follow Up ")]),t._v(" "),s("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[s("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])]),t._v(" "),s("form",{staticClass:"form form-vertical",attrs:{method:"POST",action:"#"},on:{submit:function(a){return a.preventDefault(),t.submit(a)}}},[s("div",{staticClass:"modal-body row m-1"},[s("div",{staticClass:"form-group col-12"},[s("label",{attrs:{for:"first-name-icon"}},[t._v("Assign Follow Up ")]),t._v(" "),s("div",{staticClass:"position-relative has-icon-left"},[s("select",{directives:[{name:"model",rawName:"v-model",value:t.form.user_id,expression:"form.user_id"}],staticClass:"form-control",on:{change:function(a){var s=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.form,"user_id",a.target.multiple?s:s[0])}}},[s("option",{attrs:{value:"",selected:""}},[t._v("Select User")]),t._v(" "),t._l(t.users,(function(a,e){return s("option",{key:e,domProps:{value:a.id}},[t._v(t._s(a.name))])}))],2),t._v(" "),s("div",{staticClass:"form-control-position"},[s("i",{staticClass:"feather icon-home"})])])]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.id,expression:"form.id"}],attrs:{type:"hidden",id:""},domProps:{value:t.form.id},on:{input:function(a){a.target.composing||t.$set(t.form,"id",a.target.value)}}})]),t._v(" "),s("div",{staticClass:"modal-footer"},[s("button",{staticClass:"btn btn-primary mr-1  waves-effect waves-light",attrs:{type:"submit"}},[t.loader?s("i",{staticClass:"fa fa-circle-o-notch fa-spin mr-3"}):t._e(),t._v("Save")])])])])])])],1)}),[],!1,null,null,null);a.default=o.exports}}]);